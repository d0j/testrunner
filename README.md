# testrunner Python
Быстро прогонять задачи с кейсами (вход/эталон) без правок вашей программы на Python!




ЗАЧЕМ:
- Быстро прогонять задачи с кейсами (вход/эталон) без правок вашей программы.
- Видеть понятный отчёт: шапка-таблица, для FAIL — вход (INPUT), реальный STDOUT, EXPECTED и дружелюбный DIFF.

КАК РАБОТАЕТ (high level):
1) Рядом с runner лежит ваша программа (по умолчанию: test.py) и папка с тестами ИЛИ ZIP с тестами.
2) В тестах пары файлов:
     N         — «вход»: Питон-код, который надо выполнить в namespace вашей программы
     N.clue    — «ожидаемый stdout»
3) Мы не трогаем вашу программу: создаём «harness» — небольшой хук, который:
     - импортирует (runpy.run_path) вашу программу в отдельный namespace,
     - читает stdin (содержимое файла N) и выполняет его через exec в том же namespace.
   Т.е. всё, как будто вы написали тестовый код прямо внизу вашего файла — только без правок.
4) Собираем stdout/stderr, сравниваем stdout с эталоном:
     по умолчанию сравнение «ПО СТРОКАМ» после normalizing CRLF→LF (newline-mode=lf).
     Это даёт «exact, но кроссплатформенный»: игнорируем только различие в типе перевода строк и финальном \n.
5) Печатаем сводку (таблица), затем детальные блоки только для FAIL.
   Для FAIL показываем:
     — ---INPUT--- (сырой текст входа, копипастопригодный; максимум N строк)
     — ---STDOUT--- (реальный вывод, опционально с «невидимыми» символами)
     — ---EXPECTED--- (эталон, опционально с «невидимыми»)
     — ---DIFF--- (первая несовпадающая строка и «каретка»)

КЛЮЧЕВЫЕ ПРИЁМЫ:
- Ничего не меняем в вашей программе. Все «танцы» — в harness.
- STDOUT/EXPECTED: можно подсвечивать «невидимые» (space→·, tab→→, конец строки отмечаем ⏎).
- INPUT теперь выводится «как есть», без нумерации и подсветки — чтобы легко копировать в отладку.

ПАРАМЕТРЫ:
  --prog PATH            путь к программе (по умолчанию: test.py)
  --cases PATH           путь к папке с тестами ИЛИ zip; если не задан, runner сам найдёт лучшее рядом
  --timeout SECONDS      таймаут каждого кейса (по умолчанию: 3.0)
  --lines N              максимум показываемых строк в STDOUT/EXPECTED/DIFF (по умолчанию: 10)
  --no-invisibles        не показывать «невидимые» символы в STDOUT/EXPECTED (· → ⏎)
  --allow-nonzero-exit   считать rc!=0 допустимым (по умолчанию: False)
  --newline-mode MODE    'lf' (CRLF→LF и сравнение ПО СТРОКАМ) или 'keep' (строгий побайтовый матч); по умолчанию: lf
  --show-input WHEN      'fail'|'always'|'never' — печать секции INPUT (по умолчанию: fail)
  --input-lines N        сколько строк входа печатать в INPUT (по умолчанию: 12)

СТРУКТУРА ТЕСТОВ:
  <dir>/
    1
    1.clue
    2
    2.clue
    ...

ПРИМЕЧАНИЕ:
- Если рядом с runner нет папки с тестами, но есть ZIP — runner распакует его во временную папку и использует её.
- В отчёте видны пути «case → clue», чтобы всегда можно было быстро открыть исходники кейсов.
"""
